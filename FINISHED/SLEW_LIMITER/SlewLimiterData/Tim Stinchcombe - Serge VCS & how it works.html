<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0049)http://www.timstinchcombe.co.uk/index.php?pge=vcs -->
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!-- change following if encoding is changed for some reason -->
  <meta http-equiv="content-type" content="text/html; charset=ANSI">
  <meta name="keywords" content="Tim Stinchcombe">
  <title>Tim Stinchcombe - Serge VCS &amp; how it works</title>
  <link rel="stylesheet" type="text/css" href="./Tim Stinchcombe - Serge VCS &amp; how it works_files/style.css">
  <link rel="icon" href="http://www.timstinchcombe.co.uk/favicon.ico" type="image/x-icon">
  <link rel="shortcut icon" href="http://www.timstinchcombe.co.uk/favicon.ico" type="image/x-icon">

</head>
<body>
<!-- header across top -->
<table width="100%" border="0">
<tbody><tr>
<td width="20%" align="center">
   <p class="tex_i"><a href="http://www.timstinchcombe.co.uk/index.php?pge=home"><img src="./Tim Stinchcombe - Serge VCS &amp; how it works_files/home_icon.gif" border="0" alt="www.timstinchcombe.co.uk"></a></p>
</td>
<td width="60%" align="center" id="banner"> <p></p><h2>Personal web pages of</h2><p></p>
<p></p><h1>Tim Stinchcombe</h1><p></p></td>
<td width="20%">&nbsp;</td>
</tr>
</tbody></table>

<!-- left nav and main body -->
<table width="100%" border="0">
<tbody><tr><td width="20%" align="left" valign="top"><!-- for print set 10; also comment WHOLE of FB badge in menu.php*** instead, comment /*...*/ menu php below -->

<table width="100%" border="0">
<tbody><tr><td width="10%">&nbsp;</td>
<td width="80%">
<!-- need to add a little vertical space  -->
<!-- home, top; site map bottom, suitably spaced;
use cond stat if home then this bit, else the main synth menu bit etc,
as below but expanded.
-->
<!-- !!! don't forget new_index.php -> index.php   !!!  -->
<table>
<tbody><tr><td><p><a href="http://www.timstinchcombe.co.uk/index.php?pge=home">Home</a></p></td></tr>

<tr><td><a href="http://www.timstinchcombe.co.uk/index.php?pge=synth">Synth pages</a></td></tr>
<tr><td>
  <table><tbody><tr><td rowspan="16">&nbsp;&nbsp;</td>
    <td><a href="http://www.timstinchcombe.co.uk/index.php?pge=modlst">Module summary</a></td></tr>
<tr><td><a href="http://www.timstinchcombe.co.uk/index.php?pge=synpho">Synth photo</a></td></tr>
<tr><td><a href="http://www.timstinchcombe.co.uk/index.php?pge=synsty">Synth story</a></td></tr>

<tr><td><a href="http://www.timstinchcombe.co.uk/index.php?pge=diy">DIY modules</a></td></tr>

<tr><td><a href="http://www.timstinchcombe.co.uk/index.php?pge=mods">Modifications</a></td></tr>

<tr><td><a href="http://www.timstinchcombe.co.uk/index.php?pge=diode">Diode Ladder Filters</a></td></tr>
<tr><td><a href="http://www.timstinchcombe.co.uk/index.php?pge=korg">Korg MS10/20 Filters</a></td></tr>
<tr><td><a href="http://www.timstinchcombe.co.uk/index.php?pge=papers">Moog paper refs</a></td></tr>
<tr><td><a href="http://www.timstinchcombe.co.uk/index.php?pge=spif">Fooled by SPICE</a></td></tr>
<tr><td><a href="http://www.timstinchcombe.co.uk/index.php?pge=poles">Filter pole animations</a></td></tr>
<tr><td><a href="http://www.timstinchcombe.co.uk/index.php?pge=vcs">Serge VCS</a></td></tr>
<tr><td><a href="http://www.timstinchcombe.co.uk/index.php?pge=gnat">EDP Gnat schematics</a></td></tr>
<tr><td><a href="http://www.timstinchcombe.co.uk/index.php?pge=broch">Old brochures</a></td></tr>
<tr><td><a href="http://www.timstinchcombe.co.uk/index.php?pge=pemini">PE Minisonic</a></td></tr>
  </tbody></table></td></tr>
<tr><td><a href="http://www.timstinchcombe.co.uk/index.php?pge=about">About me</a></td></tr>
<tr><td><a href="http://www.timstinchcombe.co.uk/index.php?pge=photos">Photo links</a></td></tr>
<tr><td><a href="http://www.timstinchcombe.co.uk/index.php?pge=pme">Purple Mountain<br>Exophrenics</a></td></tr>
<tr><td><a href="http://www.timstinchcombe.co.uk/index.php?pge=links">Links</a></td></tr>
<tr><td><a href="http://www.timstinchcombe.co.uk/index.php?pge=cntct">Contact details</a></td></tr>
<tr><td><a href="http://www.timstinchcombe.co.uk/index.php?pge=new">What's new</a></td></tr>
<tr><td><a href="http://www.timstinchcombe.co.uk/index.php?pge=ccfp">Cheltenham Circular Footpath</a></td></tr>
<tr><td><a href="http://www.timstinchcombe.co.uk/index.php?pge=xmas">The Trouble with Christmas</a></td></tr>
<tr><td><a href="http://www.timstinchcombe.co.uk/index.php?pge=this">this night wounds time</a></td></tr>
<tr><td><a href="http://www.timstinchcombe.co.uk/index.php?pge=behold">Behold the Computer<br>Revolution</a></td></tr>
<tr><td><a href="http://www.timstinchcombe.co.uk/index.php?pge=solar">Solartron scans</a></td></tr>

<tr><td><p><a href="http://www.timstinchcombe.co.uk/index.php?pge=map">Site map</a></p></td></tr>

<tr><td><p><br><br>I'm giving a new way of using Facebook a try...<br><br>
<!-- Facebook Badge START --><a href="http://www.facebook.com/TimStinchcombeSynthStuff" target="_TOP" style="font-family: &quot;lucida grande&quot;,tahoma,verdana,arial,sans-serif; font-size: 11px; font-variant: normal; font-style: normal; font-weight: normal; color: #3B5998; text-decoration: none;" title="Tim Stinchcombe&#39;s Synth Stuff">Tim Stinchcombe's Synth Stuff</a><br><a href="http://www.facebook.com/TimStinchcombeSynthStuff" target="_TOP" title="Tim Stinchcombe&#39;s Synth Stuff"><img src="./Tim Stinchcombe - Serge VCS &amp; how it works_files/473282712752450.1941.1448763523.png" style="border: 0px;"></a><br><!-- Facebook Badge END -->
</p></td></tr>

</tbody></table>
<!--
<table>
<tr><td>menu0_0</td></tr>
<tr><td>menu0_1</td></tr>
<tr><td>
  <table><tr><td rowspan="5">&nbsp&nbsp</td>
  <td>menu0_1_0</td></tr>
  <tr><td>menu0_1_1</td></tr>
  <tr><td>
    <table><tr><td rowspan="2">&nbsp&nbsp</td>
    <td>menu0_1_1_0</td></tr>
    <tr><td>menu0_1_1_1</td></tr>
    </table></td></tr>
  <tr><td>menu0_1_2</td></tr>
  <tr><td>menu0_1_3</td></tr>
  </table></td></tr>
<tr><td>menu0_2</td></tr>
<tr><td>menu0_3</td></tr>
</table>-->

<!--
this is probably old shit, but embedded php was giving error on 'menu'
so php still parsing despite being in the comment, so added php-style
comment and it went away ...!
<TABLE>
<TR><TD>
      <A HREF="index.php?menu=news">news</A></TD></TR>
<TR><TD>
      <A HREF="index.php?menu=sub">submenu</A>
      </TD></TR>
<TR><TD>
      <A HREF="index.php?menu=links">links</A></TD></TR>
</TABLE>
--></td>
<td width="10%">&nbsp;</td>
</tr></tbody></table>

</td><!-- finish 20% -->
<td width="60%" valign="top"><!-- main body; for print set 80 -->

<br>
<h2>Serge VCS - How it Works</h2>
<p>This page focuses on the Serge VCS voltage-controlled slope circuit, as embodied in the <a href="http://www.cgs.synth.net/" target="_blank">Cat Girl Synth</a> <a href="http://www.cgs.synth.net/modules/cgs75_vcs.html" target="_blank">CGS75</a> module (available as a PCB), and the Bananalogue Serge VCS module. (It appears that the Bananalogue website, <em>www.bananalogue.com</em>, disappeared sometime in 2008, but the VCS page (including the pictures) is viewable at the <a href="http://web.archive.org/web/20080224013413/www.bananalogue.com/vcs.html" target="_blank">Internet Archive</a>, and as of December 2009 the module has once again been made available through <a href="http://bigcitymusic.com/product.asp?pid=1000871" target="_blank">Big City Music</a>.)</p>
<p class="tex_t">The Serge VCS is a licensed adaptation of the Serge DTG/DUSG (Dual Transient Generator/Dual Universal Slope Generator) circuit—the VCS has elements in common with that circuit, but it also incorporates a number of additional features. I was first alerted to it by someone asking for troubleshooting-help on one of the forums: my initial reaction was that it looked a simple-enough circuit, despite a few 'eyebrow-raising' sections (the graphic below links to the schematic). However, upon closer</p>
<p class="tex_i" style="text-align: left"><a href="http://www.cgs.synth.net/modules/pic/schem_cgs75_vcs.gif" target="_blank"><img src="./Tim Stinchcombe - Serge VCS &amp; how it works_files/schem_cgs75_vcs_warp.gif" alt="Click to open schematic new window" title="Click to open schematic in new window"></a></p>
<p class="tex_t">inspection I soon became intrigued as to how the same few components could act not only to produce slew-limiting/envelope generation, but also perform voltage-following too. It is the aim of this page to describe some of the more interesting aspects of the circuit's operation. (Not included are the more mundane functions, such as the CV-summing etc.—these are fairly standard-fare analogue circuits, descriptions of which abound both in the literature and on the internet.)</p>
<h2>Logic/envelope phase switching</h2>
<p>The circuit uses LM3900 current-differencing amplifiers (CDAs, also frequently referred to as 'Norton amplifiers') to implement the 'logic' which controls the various phases during envelope generation. To my mind, compared to normal op amps, these have a certain 'inelegance' in their use (some references are given at the <a href="http://www.timstinchcombe.co.uk/index.php?pge=vcs#lm_refs">bottom of the page</a>), and they certainly make frequent appearances in Serge circuits. In the context of the current circuit their use is comparatively simple, so we start with them. [Negative feedback configurations for op amps are easy because the feedback forces the input <em>voltages</em> to be the same; if negative feedback is applied to a CDA, then it does its level best to keep the <em>currents</em> into the inputs the same. In the absence of negative feedback, the output goes with the biggest input current: more current at the positive input, the output is high; more current into the negative input, the output is low.]</p>
<p class="tex_t">The following scope traces are (note that in this, and all the other scope shots, the vertical scales may be <em>different</em> from trace to trace!): trace 1 (red) is the trigger input (from an LFO); 2 (blue) is the envelope output; 3 (green) is LM3900 pin 9, 'attack'; 4 (orange) LM3900.10, 'not attack'; 5 (mauve) LM3900.4, 'end out':</p>
<p class="tex_i" style="text-align: center"><img src="./Tim Stinchcombe - Serge VCS &amp; how it works_files/vcs_logic.gif"></p>
<p class="tex_t">Considering the LM3900 amplifiers 8/9/13 and 10/11/12 as a pair, the default with no trigger and the envelope low is pin 10 (orange) high (i.e. somewhat below the positive rail), which feeds current into negative input pin 8, which with no trigger/no current into pin 13, the output pin 9 (green) is low (a little above ground). On a trigger input, a pulse of current (larger than that into the negative input) into positive input pin 13 switches output 9 high; with no envelope/little current into positive input pin 12, and now lots of current into negative input pin 11, output pin 10 (orange) goes low (and note that this is unable to impact the state of pin 9, via pin 8). As the envelope climbs to its peak, the current at positive input pin 12 will exceed that into negative input pin 11, and so output 10 switches high, in turn causing output 9 to go low, back to its original state, awaiting another trigger (the exact switch-over point depends on the trimpot setting—my module clearly gives a 6V envelope). Thus pin 9 (green) designates 'attack', and pin 10 (orange) is 'not attack'.</p>
<p>The other trace shown above (mauve) is the 'end out' signal, but note I have literally probed pin 4 of the LM3900, so it is bigger than the 5V or so output from the module due to the zener diode. Its default state is high: this feeds about 10μA back to the positive input pin 2, which being more than that into the negative input pin 3 (about 1μA), ensures the output stays high. When the envelope (the 'out' signal) climbs above about 3V, 10μA or more is delivered to the <em>negative</em> input pin 3 (via the 330kΩ), and this will switch the output low, which will stay there whilst there is sufficient current into pin 3. Once the envelope falls back to near ground, <em>all</em> the current into pin 3 is 'robbed' by the 330kΩ resistor, and the output will flip high again—hence the 'end out' signal.</p>
<p class="tex_t">The following traces show the same signals when the circuit is switched into 'cycle' mode, i.e. it acts as an LFO. The cycling is simply achieved by feeding the 'end out' signal back as a trigger, so when end out goes high at the end of the cycle, the whole thing triggers off again for another cycle, <em>ad infinitum</em>. Trace 1 (blue) is the 'envelope' out, i.e. the LFO waveform; 2 (green) LM3900.9 'attack'; 3 (orange) LM3900.10 'not attack'; 4 (mauve) LM3900.4 'end out':</p>
<p class="tex_i" style="text-align: center"><img src="./Tim Stinchcombe - Serge VCS &amp; how it works_files/vcs_logic_cyc.gif"></p>

<h2>Envelope generation/slew-limiting</h2>
<p class="tex_t">At the heart of the circuit is a simple inverting integrator, formed from section 1/2/3 of the TL072, with a 22nF capacitor as the negative feedback loop. Feeding this is a complicated-looking arrangement of four transistors—a pair of NPNs and a pair of PNPs. If these are re-drawn as follows:</p>
<p class="tex_i" style="text-align: center"><img src="./Tim Stinchcombe - Serge VCS &amp; how it works_files/vcs_diff_prs.gif"></p>
<p class="tex_t">it is much clearer that the transistors are merely acting as a pair of differential pairs. The tails of both pairs are wired through the 22kΩ to output pin 7 of section 5/6/7: if, say, pin 7 is negative, then the NPN pair is on, and the PNP pair will be off; Q2 will draw current from the ground at its collector, and Q1 will draw current from the op amp virtual ground at pin 2, so the 22nF charges and the output pin 1 will <em>rise</em>, at a rate depending on the share of current between Q1 and Q2 collectors, which in turn depends on the differential voltage across their bases ('Rise V' and 'Expo V'). If we plot the Q1 and Q3 collector currents, we get the familiar 'tanh' shaped curves we expect of differential pairs (simulation output: sweeping 'Fall V' and 'Rise V'; pin 7 ±10V resp.; 'Expo V' grounded):</p>
<p class="tex_i" style="text-align: center"><img src="./Tim Stinchcombe - Serge VCS &amp; how it works_files/vcs_diff_pr_i.gif"></p>
<p class="tex_t">If pin 7 is positive, then the PNP pair will be on and the NPN pair off, and now current flows in the <em>opposite</em> direction into the virtual ground, and the charged capacitor will now discharge, causing the output voltage to <em>fall</em>, at a rate this time dependent on the voltage across Q3 and Q4 bases ('Fall V' and 'Expo V'). If all voltages into the transistors are held constant, the current into/out of the integrator is constant, and so the output voltage rises and falls <em>linearly</em>, which is what happens when we are slew-limiting or generating <em>linear</em> envelopes (when the rise and fall pots are pulled, this allows the pin 1 output voltage to impact the voltages at the bases ('Rise V' and 'Fall V' above), hence allowing for exponential- or logarithmic-shaped envelope segments).</p>
<p></p>
<p class="tex_t">When generating an envelope (and not 'following'), section 5/6/7 acts as a basic comparator (as the 47pF acts as an open-circuit—more on this below). The following traces show: 1 (blue) the envelope out ≡ TL072.1; 2 (red) TL072.5; 3 (mauve) TL072.7:</p>
<p class="tex_i" style="text-align: center"><img src="./Tim Stinchcombe - Serge VCS &amp; how it works_files/vcs_env.gif"></p>
<p>and the envelope generation operation is thus: a trigger in makes LM3900.9 go high, as described above; the PNP connected to LM3900.9 via the 220kΩ/68kΩ is thus turned off, so TL072.5 is pulled to –6V or so by the two 220kΩs on TL072.1; TL072.7 will saturate near the negative rail, so we are in the 'attack' (rise) phase, the NPN pair is turned on, and output pin TL072.1 rises; TL072.5 'tracks' the envelope with an offset—it is negative and increasing; when the envelope gets to 6V, LM3900.10 flips to high (again as above) and LM3900.9 goes low; the PNP turns on, making the diode between the 220kΩs reverse-biased, so now TL072.5 positive input tracks the envelope exactly, which being positive, ensures the output pin TL072.7 goes to nearly the positive rail (we are assuming there is no signal at 'in'), which turns the NPN pair off, the PNP pair on, and so we go to 'not attack' (fall, or decay) phase, and the envelope falls. Finally, when it has fallen far enough, 'end out' goes high, marking the end of the whole cycle. (Note the considerable 'indecision'/oscillation at pin 7 when it has no 'definite' value, as it does during the envelope cycle!)</p>

<h2>Voltage follower/slew-limiter</h2>
<p class="tex_t">To see how the circuit functions as a voltage follower, let's simplify things a little: from above we know that when we are in 'not attack', LM3900 pin 9 is low, the PNP is on, the diode between the 220kΩs is reverse-biased, and so TL072.5 is only connected to TL072.1 via the 220kΩ resistor; the op amp has negligible input bias current, so we can ignore the 220kΩ and show pins 5 and 1 connected directly; the two differential pairs set-up complicates things too, so let's replace all of that with a simple resistor, <em>R<sub>equiv</sub></em>, say. The circuit we now have to deal with is this:</p>
<p class="tex_i" style="text-align: center"><img src="./Tim Stinchcombe - Serge VCS &amp; how it works_files/vcs_follow_cir.gif"></p>
<p class="tex_t">The operation of the inverting integrator (at right) formed from TL072 1/2/3 is still clear, so now we concentrate on the action of the first amplifier (which, as we mentioned above, sometimes acts as a basic comparator). For the purposes of this analysis, let's assume the non-inverting input (pin 5) is grounded. Then at higher frequencies, the reactance of the 47pF capacitor is negligible when compared to the 10MΩ resistor, and so the whole simply looks like a x100 inverting amplifier (i.e. we get 40dB of gain). At lower frequencies, it is the other way round, the capacitive reactance dominates, so this looks like an inverting integrator with the 0dB frequency given by 1/(2<font face="roman">π</font>×47e–12×100e3) = 33.8kHz. The integrator's '1/<em>s</em>' line comes back up from this point at 20dB/decade, meeting the 40dB line at 338Hz, and thus for frequencies above about 300Hz the amplifier gives a gain of 40dB, and for lower frequencies, the <em>gain is even more</em>. The following frequency response shows the overall amplifier response, along with these two other curves, and the TL072/4 open-loop response (which ultimately limits the available gain):</p>
<p class="tex_i" style="text-align: center"><img src="./Tim Stinchcombe - Serge VCS &amp; how it works_files/in_amp_bode.gif"></p>
<p class="tex_t">Thus for DC signals the maximum (open-loop) gain of the op amp is available, and hence the assertion that for such signals it acts like a simple comparator is seen to be valid. Replacing this amplifier with a simple gain block '<em>A<sub>in</sub></em>' results in an arrangement which looks like this:</p>
<p class="tex_i" style="text-align: center"><img src="./Tim Stinchcombe - Serge VCS &amp; how it works_files/vcs_foll_model.gif"></p>
<p class="tex_t">where now block '<em>SL</em>' is responsible for the slew-limiting effect. (It is not too difficult to do a slightly more rigorous analysis which shows that this gain approximation still holds even when the non-inverting input is no longer held at ground.) Setting the feedback loop aside for the moment, this bears more than a passing resemblance to the simple integrator/one-pole model often used for a standard op amp (see e.g. <a href="http://www.timstinchcombe.co.uk/index.php?pge=vcs#text_refs">[1] p837, or slightly more complex [2] p19 or [3] p259</a>):</p>
<p class="tex_i" style="text-align: center"><img src="./Tim Stinchcombe - Serge VCS &amp; how it works_files/op_amp_model.gif"></p>
<p class="tex_t">The transconductance input stage, <em>g<sub>m</sub></em> (a differential pair or the like), feeds an inverting integrator; an inherent characteristic of the <em>g<sub>m</sub></em>-stage—the maximum current it can deliver—imposes the slew-rate limit on the op amp by preventing the integrator output voltage from changing as fast as it would like. The VCS circuit replicates this action, only in this case the slew-rate limit is deliberately imposed by the two differential pairs that constitute the <em>SL</em> block, limiting the current feeding the main integrator (and thus the slew-limiting is determined by the voltages controlling the differential pairs). It is not too difficult to show that this arrangement does indeed give a voltage-follower/unity gain. From the upper diagram the output of the <em>A<sub>in</sub></em> block is<br><em>A<sub>in</sub>(V<sub>out</sub>–V<sub>in</sub>)</em> and thus, taking the integrator as <em>–1/(τs)</em>,</p>
<p class="tex_t" style="text-align: center"><em>V<sub>out</sub> = –A<sub>in</sub>(V<sub>out</sub>–V<sub>in</sub>)/(τs)</em>,</p>
<p class="tex_t">which is easily re-arranged to give</p>
<p class="tex_t" style="text-align: center"><em>V<sub>out</sub>/V<sub>in</sub> = A<sub>in</sub>/(τs+A<sub>in</sub>) = 1/(τs/A<sub>in</sub>+1) ≈ 1</em>,</p>
<p class="tex_t">the unity gain we seek, as long as <em>1&gt;&gt;τ/A<sub>in</sub></em>, i.e. <em>A<sub>in</sub></em> is big and <em>τ</em> is small (<em>τ</em> is the effective time-constant of the integrator, dependent on the 22nF capacitor and the slew-limit current from the differential pairs).</p>
<p></p>
<p>[I have managed to avoid mention of phase and stability considerations in all of the above: suffice it to say that it does just about manage to hang together. Of greatest concern is the phase from the output of the input amplifier, pin 7, back round to its <em>non-inverting</em> input, pin 5; this travels through the main (inverting) integrator, which thus has phase <em>lead</em> of 90°, giving +90° at pin 5; this is halfway between positive feedback (0°) and negative feedback (180°), but as it doesn't seem to be associated with any of the usual detrimental qualities of positive feedback, I'm inclined to regard it as being <em>negative</em> feedback. The input amplifier itself also has large phase changes between working as an integrator at low frequencies, to a straight inverting amplifier higher up.]</p>

<p class="tex_t">The following scope traces are: 1 (blue) sine wave input; 2 (red) the output, when not slew-limiting; 3 (mauve) pin 7, when not slew-limiting; 4 (red) output, when just slew-limiting; 5 (mauve) pin 7, when slew-limiting:<br>
</p><p class="tex_i" style="text-align: center"><img src="./Tim Stinchcombe - Serge VCS &amp; how it works_files/vcs_follow.gif"></p>
The top pair of red and blue traces show that the output is following the input, with the slew-rate set to max, i.e. both rise and fall pots fully counter-clockwise. Trace 3, mauve, is the corresponding pin 7 signal for this case—it is actually the negation of the <em>derivative</em> of the input. This isn't difficult to show analytically, but as the output of the main integrator is the same as input signal, the input to the integrator must be the derivative of the input signal (plus the sign inversion). The bottom set of traces is when the slew-limiting is just coming into effect, by turning the rise and fall pots clockwise: 4 (red) is the resultant slew-limited, hence triangular, output signal; 5 (mauve) is pin 7, which is now saturating near the supply rails. (If a triangle wave is input, and which isn't slew-limited, pin 7 will also be a square wave, the amplitude of which will be proportional to the rising and falling slopes of the wave.)<p></p>
<h2>Adding sustain to an envelope</h2>
<p class="tex_t">This is achieved by the simple expedient of inputting a pulse of the requisite amplitude into the <em>input</em> whilst an envelope has been triggered—this will cause the envelope to <em>follow</em> the pulse at the appropriate point. In the following: 1 (red), trigger pulse; 2 (blue) ordinary envelope; 3 (blue) sustained envelope; 4 (mauve) sustain pulse at input:</p>
<p class="tex_i" style="text-align: center"><img src="./Tim Stinchcombe - Serge VCS &amp; how it works_files/vcs_sustain1.gif"></p>
<p class="tex_t">Note that even though the sustain pulse starts during attack, it is ignored, because the LM3900.9 is low, the PNP is on, and the diode between the 220kΩs 'interrupts' the signal from TL072.1 to TL072.5. Once in 'not attack', the envelope will slew down until it reaches the sustain pulse, and then follow it; at the end of the pulse the envelope again slews down normally. The following set of traces shows what happens when the pulse is actually greater than the envelope 6V-point for switching from attack to not attack—it will slew <em>up</em> to the pulse amplitude, and then follow it, again slewing to ground when the pulse finishes:</p>
<p class="tex_i" style="text-align: center"><img src="./Tim Stinchcombe - Serge VCS &amp; how it works_files/vcs_sustain2.gif"></p>
<h2>Other odd stuff</h2>
<p>[I have a few more traces/animations of other interesting behaviour which I hope to add soon.]</p>

<!--
animated gifs?
hard to analyse SPICE due to non-linear effects of op amp saturation??<br>
sim shows res peak - how to see this; plus the animated gifs?; problems with SPICE not seeing the non-linearity of the slew-limit; in awe of Serge for designing it!?<br>
sustain is just variable amplitude pulse into input whilst env'genning<br>
<a href="resonance2.gif"><img src="resonance2_static.gif"/></a><br>
<a href="resonance3.gif"><img src="resonance3_static.gif"/></a><br>
<a href="resonance.gif"><img src="resonance_static.gif"/></a><br>
-->
<a name="lm_refs"><h2>LM3900 &amp; MC3401 links and references</h2></a>
<p>Texas Instruments still manufacture LM3900 chips:
the <a href="http://www.ti.com/product/lm3900" target="_blank">TI LM3900 product page</a> with the actual <a href="http://www.ti.com/lit/gpn/lm3900" target="_blank">datasheet here</a>. Presumably National Semiconductor were the originators of the chip, but as National, it had long been out of production—National were bought by TI some years ago, and the <a href="http://www.ti.com/lit/gpn/lm3900-n" target="_blank">original National data sheet</a> can still be found, and the large and very useful <a href="http://www.ti.com/lit/pdf/snoa653" target="_blank">application note, AN-72</a> is also still available.</p>
<p>Motorola/On Semiconductor's equivalent, the MC3401, is also long since out of production, but the datasheet can be found in several places on the web: <a href="http://www.datasheetarchive.com/pdf-datasheets/Datasheets-32/DSA-638532.pdf">MC3401 datasheet at <em>datasheetarchive.com</em></a>.</p>

<a name="text_refs"><h2>References</h2></a>
<p></p><table>
<tbody><tr><td valign="top">[1]</td><td><em>Microelectronic Circuits</em>, AS Sedra &amp; KC Smith, Oxford University Press, 1982</td>
</tr><tr><td valign="top">[2]</td><td><em>Design of Analog Filters</em>, R Schaumann &amp; ME Valkenburg, Oxford University Press, 2001</td>
</tr><tr><td valign="top">[3]</td><td><em>Design with Operational Amplifiers and Analog Integrated Circuits</em>, S Franco, McGraw-Hill, 2002</td></tr></tbody></table><p></p>

<p style="text-align: right">[Page last updated: 24 Aug 2014]</p>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>

</td>
<td width="20%"><!-- right margin; for print set 10 - &nbsp for null contents-->&nbsp;</td>
</tr></tbody></table>


</body></html>